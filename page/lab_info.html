<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>梦想大师的个人博客</title>
		<meta name="keywords" content="梦想大师,梦想大师个人博客,个人博客模板"/>
		<meta name="description" content="梦想博客，是记录博主学习和成长的一个自媒体博客，希望借此结交更多前辈好友。愿与你共同分享web技术知识，一起进步！"/>
		<!--公共部分-->
		<link rel="stylesheet" href="../css/bootstrap.min.css" />
		<!--<link rel="stylesheet" href="../css/public/public.css" />-->
		<script type="text/javascript" src="../js/jquery-2.1.1.min.js" ></script>
		<script type="text/javascript" src="../js/bootstrap.min.js" ></script>
		<link rel="shortcut icon" href="../images/favicon.ico">
	
	    
 
	</head>
	<body>

	<!--知识点详情-->
	<link rel="stylesheet" href="../css/lab/info/lab_info.css" />

	<div id="info-header">
        <h1 class="title">ECMAScript 6</h1>
        <a class="home" target="_blank" href="index.html"><img src="../images/home/nav/logo.png" class="logo"/>返回首页</a>
    </div>

    <div id="info-l">
    	<ul>
			<li class="selected">前言</li>
			<li>let和const命令</li>
			<li>关于...参数</li>
			<li><a href="#">变量的赋值</a></li>
			<li><a href="#">String的扩展</a></li>
			<li><a href="#">Number的扩展</a></li>
			<li><a href="#">Function的扩展</a></li>
			<li><a href="#">Object的扩展</a></li>
			<li><a href="#">Array的扩展</a></li>
			<li><a href="#">Set和Map</a></li>
			<li><a href="#">Iterator和for...of循环</a></li>
			<li><a href="#">Generator和Promise</a></li>
			<li><a href="#">异步操作和Async函数</a></li>
			<li><a href="#">Proxy和Reflect</a></li>
			<li><a href="#">Symbol</a></li>
			<li><a href="#">Class</a></li>
			<li><a href="#">Module</a></li>
			<li><a href="#">Proxy和Reflect</a></li>
			<li><a href="#">Proxy和Reflect</a></li>
			<li><a href="#">Proxy和Reflect</a></li>
			<li><a href="#">Proxy和Reflect</a></li>
			<li><a href="#">Proxy和Reflect</a></li>
			<li><a href="#">Proxy和Reflect</a></li>			
			<li><a href="#">参考</a></li>
		</ul>
    </div>
    
    
	<div id="info_content">
		
		<h1 class="name">名字</h1>
		<div class="info">
			
			<h1 id="let-const">let和const命令<a class="anthor">#</a></h1>
		
<h2 id="let-">let命令<a class="anthor">#</a></h2>
<p>ES6新增了<code class=" language-undefined">let</code>命令，用来声明变量。它的用法类似于var，但是所声明的变量，只在let命令所在的代码块内有效。</p>
<p>所以，我们可以直接摒弃所有的var操作，建议替换成let操作。</p>
<div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript"><span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
a <span class="token comment">// ReferenceError: a is not defined.</span>
b <span class="token comment">// 1</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></div>
<p>总而言之，就是摒弃掉了之前var全局的弊端。</p>
<div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//error</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></div>
<p><strong>let的最大好处就是，它不会变成全局变量。</strong></p>
<div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 如果在Node的REPL环境，可以写成global.a</span>
<span class="token comment">// 或者采用通用方法，写成this.a</span>
window<span class="token punctuation">.</span>a <span class="token comment">// 1</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>b <span class="token comment">// undefined</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></div>
<p>但是在使用let时会有一些注意事项，比如：<br><em>注意事项：不能延后声明变量</em><br><strong>解决方案：在使用时，最好把let赋值放在代码最上面。</strong></p>
<div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TDZ开始</span>
    tmp <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError</span>

    <span class="token keyword">let</span> tmp<span class="token punctuation">;</span> <span class="token comment">// TDZ结束</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

    tmp <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123</span>
<span class="token punctuation">}</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></div>
<p><em>注意事项：let不允许在相同作用域内，重复声明同一个变量。</em><br><strong>解决方案：在相同作用域内，避免出现命名冲突。</strong></p>
<div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript"><span class="token comment">// 报错</span>
<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 报错</span>
<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">let</span> arg<span class="token punctuation">;</span> <span class="token comment">// 不报错</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></div>
<h2 id="const-">const命令<a class="anthor">#</a></h2>
<p><code class=" language-undefined">const</code>命令也是用来声明变量的，But声明的是常量。皆大喜奔！！！</p>
<p>在严格模式下，重写const的变量是会出现报错，但是如果正常模式下，不会报错，但是修改不会有效。</p>
<p>并且，<em>const的作用域与let命令相同：只在声明所在的块级作用域内有效</em>，这点也需要注意。</p>
<p>因为通常状况下，const比较多使用在全局的状况下。</p>
<p>并且const命令也不能延后声明，其实var的延后声明我们可以完全抛弃。而且const声明的常量，也与let一样不可重复声明。</p>
<div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">const</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.1415</span><span class="token punctuation">;</span>
<span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// 常规模式时，重新赋值无效，但不报错</span>
<span class="token constant">PI</span> <span class="token comment">// 3.1415</span>


<span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.1415</span><span class="token punctuation">;</span>
<span class="token constant">PI</span> <span class="token comment">// 3.1415</span>
<span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">// TypeError: "PI" is read-only</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></div>
<p>但是，我们javascript中常量很多定义成对象，不然众多常量太零散，于是我们希望有一个对象常量，就是一个冻结对象。</p>
<p>对象冻结，应该使用<code class=" language-undefined">Object.freeze</code>方法。</p>
<div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">const</span> foo <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 常规模式时，下面一行不起作用；</span>
<span class="token comment">// 严格模式时，该行会报错</span>
foo<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></div>
<p><em>但是Object.freeze方法并不会做深度对象冻结。</em></p>
<div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">const</span> foo <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>prop<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span>prop<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//{ prop: { a: 123 } }</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></div>
<p><strong>解决方法：下面是一个将对象彻底冻结的函数。</strong></p>
<div class="code-toolbar"><pre class=" language-javascript"><code class=" language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">constantize</span> <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">constantize</span><span class="token punctuation">(</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token function">constantize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>prop<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span>prop<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token comment">//Can't add property a, object is not extensible</span>
</code></pre><div class="toolbar"><div class="toolbar-item"><a>Copy</a></div></div></div>
<div class="book-footer"><a class="book-footer-prev-link" href="#README"><i class="book-icon-left"></i> 前言</a><a class="book-footer-next-link" href="#rest">关于...参数 <i class="book-icon-right"></i></a></div>
	
			
		</div>
		
	
	</div>
	
	<!--返回顶部-->
	<div id="backtop">
        <img src="../images/home/nav/ball.png">
    </div>

	
	</body>
</html>
<!--弹窗-->
<script src="../js/home/layer/layer.js"></script>
<script src="../js/public/footer.js"></script>
<!--导航初始化-->
<script type="text/javascript" src="../js/public/nav.js" ></script>
<script type="text/javascript" src="../js/lab/lab_info_date.js" ></script>
